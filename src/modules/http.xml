<module>
  <name>http</name>
  <description><para>The http module performs GET requests over either HTTP or HTTPS and checks the return code.</para>
  </description>
  <loader>C</loader>
  <image>http.so</image>
  <moduleconfig>
    <parameter name="url"
               required="optional"
               allowed=".+">The default URL to be used by checks that do not specify an explicit URL.</parameter>
    <parameter name="ca_chain"
               required="optional"
               allowed=".+">A path to a file containing all the certificate authorities that should be loaded to validate the remote certificate (for SSL checks).  This is used for SSL checks if this paramter is not set explicitly in the check config.</parameter>
    <parameter name="certificate_file"
               required="optional"
               allowed=".+">A path to a file containing all the client certificate that will be presented to the remote server (for SSL checks).  This is used for SSL checks if this paramter is not set explicitly in the check config.</parameter>
  </moduleconfig>
  <checkconfig>
    <parameter name="url"
               required="required"
               allowed=".+">The URL including schema and hostname (as you would type into a browser's location bar).</parameter>
    <parameter name="ca_chain"
               required="optional"
               allowed=".+">A path to a file containing all the certificate authorities that should be loaded to validate the remote certificate (for SSL checks).</parameter>
    <parameter name="certificate_file"
               required="optional"
               allowed=".+">A path to a file containing all the client certificate that will be presented to the remote server (for SSL checks).</parameter>
    <parameter name="code"
               required="optional"
               default="200"
               allowed="[1-5][0-9][0-9]">The HTTP code that is expected.  If the code received matches this code, the check is marked as "good," if it does not match, it is marked as "bad."</parameter>
  </checkconfig>
  <examples>
    <example>
      <title>Checking an HTTP and HTTPS URL.</title>
      <para>This example checks the OmniTI Labs website over both HTTP and HTTPS..</para>
      <programlisting><![CDATA[
      <noit>
        <modules>
          <module image="http" name="http">
            <config><ca_chain>/etc/ssl/ca.crt</ca_chain></config>
          </module>
        </modules>
        <checks>
          <labs target="8.8.38.5" module="http">
            <check uuid="fe3e984c-7895-11dd-90c1-c74c31b431f0" name="http">
              <config><url>http://labs.omniti.com/</url></config>
            </check>
            <check uuid="1ecd887a-7896-11dd-b28d-0b4216877f83" name="https">
              <config><url>https://labs.omniti.com/</url></config>
            </check>
          </labs>
        </checks>
      </noit>
    ]]></programlisting>
    </example>
  </examples>
</module>
